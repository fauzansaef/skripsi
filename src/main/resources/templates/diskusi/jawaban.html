<!DOCTYPE html>
<html layout:decorate="~{layout/base}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>Office TIK - Jawaban</title>
</head>
<body>
<div layout:fragment="content" th:remove="tag">

    <div class="toolbar mt-0" id="kt_toolbar" style="background-color: #FEC91B;">
        <div id="kt_toolbar_container" class="container-fluid d-flex ">
            <div data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}" class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0">
                <div data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}" class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0">
                    <h1 class="d-flex text-dark fw-bolder fs-3 align-items-center my-1">Jawaban</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="d-flex flex-column flex-xl-row">
                <div class="flex-lg-row-fluid mb-20 mb-xl-0">
                    <div class="mb-0">
                        <div class="d-flex align-items-center mb-5">
                            <th:block th:if="${detailPermasalahan.getStatus() == '1'}">
                                <span class="svg-icon svg-icon-4qx svg-icon-success ms-n2 me-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path opacity="0.3" d="M19 22H5C4.4 22 4 21.6 4 21V3C4 2.4 4.4 2 5 2H14L20 8V21C20 21.6 19.6 22 19 22ZM11.7 17.7L16 14C16.4 13.6 16.4 12.9 16 12.5C15.6 12.1 15.4 12.6 15 13L11 16L9 15C8.6 14.6 8.4 14.1 8 14.5C7.6 14.9 8.1 15.6 8.5 16L10.3 17.7C10.5 17.9 10.8 18 11 18C11.2 18 11.5 17.9 11.7 17.7Z" fill="currentColor" />
                                        <path d="M10.4343 15.4343L9.25 14.25C8.83579 13.8358 8.16421 13.8358 7.75 14.25C7.33579 14.6642 7.33579 15.3358 7.75 15.75L10.2929 18.2929C10.6834 18.6834 11.3166 18.6834 11.7071 18.2929L16.25 13.75C16.6642 13.3358 16.6642 12.6642 16.25 12.25C15.8358 11.8358 15.1642 11.8358 14.75 12.25L11.5657 15.4343C11.2533 15.7467 10.7467 15.7467 10.4343 15.4343Z" fill="currentColor" />
                                        <path d="M15 8H20L14 2V7C14 7.6 14.4 8 15 8Z" fill="currentColor" />
                                    </svg>
                                </span>
                            </th:block>
                            <th:block th:if="${detailPermasalahan.getStatus() != '1'}">
                                <span class="svg-icon svg-icon-2x me-5 ms-n1 mt-2 svg-icon-warning">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path opacity="0.3" d="M19 22H5C4.4 22 4 21.6 4 21V3C4 2.4 4.4 2 5 2H14L20 8V21C20 21.6 19.6 22 19 22ZM16 13.5L12.5 13V10C12.5 9.4 12.6 9.5 12 9.5C11.4 9.5 11.5 9.4 11.5 10L11 13L8 13.5C7.4 13.5 7 13.4 7 14C7 14.6 7.4 14.5 8 14.5H11V18C11 18.6 11.4 19 12 19C12.6 19 12.5 18.6 12.5 18V14.5L16 14C16.6 14 17 14.6 17 14C17 13.4 16.6 13.5 16 13.5Z" fill="currentColor"></path>
                                        <rect x="11" y="19" width="10" height="2" rx="1" transform="rotate(-90 11 19)" fill="currentColor"></rect>
                                        <rect x="7" y="13" width="10" height="2" rx="1" fill="currentColor"></rect>
                                        <path d="M15 8H20L14 2V7C14 7.6 14.4 8 15 8Z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </th:block>
                            <div class="d-flex align-items-center flex-grow-1">
                                <div class="d-flex flex-column">
                                    <h1 class="text-gray-800 fw-bold" th:text="${detailPermasalahan.getPermasalahan()} != null ?  ${detailPermasalahan.getPermasalahan()} : '-'"></h1>
                                    <div class="">
                                        <span class="fw-bold text-muted me-6">By:
                                            <a href="#" class="text-muted text-hover-primary" th:text="${detailPermasalahan.getNama_pegawai()} != null ?  ${detailPermasalahan.getNama_pegawai()} : '-'"></a></span>
                                        <span class="fw-bold text-muted">Created:
                                            <span class="fw-bolder text-gray-600 me-1" th:text="${#strings.substring(detailPermasalahan.getTgl_create(),0,10)} != null ? ${#strings.substring(detailPermasalahan.getTgl_create(),0,10)} : '-'"></span></span>
                                    </div>
                                </div>
                            </div>
                            <th:block th:if="${detailPermasalahan.getNip_pegawai() == nipPegawai}">
                                <div class="ms-5">
                                    <button class="btn btn-sm btn-icon btn-bg-light btn-active-color-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                                        <i class="bi bi-three-dots fs-3"></i>
                                    </button>
                                    <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-bold w-200px py-3" data-kt-menu="true">
                                        <th:block th:if="${detailPermasalahan.getStatus() == '0'}">
                                            <div class="menu-item px-3">
                                                <a data-toggle="modal" title="Edit" data-bs-toggle="modal" data-bs-target="#modalEditPertanyaan" th:id="${detailPermasalahan.getId_masalah()}" class="menu-link px-3 btn-edit-pertanyaan">Edit</a>
                                            </div>
                                            <div class="menu-item px-3">
                                                <a th:id="${detailPermasalahan.getId_masalah()}" onclick="updateSolved(this.getAttribute('id'),2);" class="menu-link px-3">Solved</a>
                                            </div>
                                        </th:block>
                                        <div class="menu-item px-3 my-1">
                                            <a th:id="${detailPermasalahan.getId_masalah()}" onclick="hapusPertanyaan(this.getAttribute('id'),2);" class="menu-link px-3">Hapus</a>
                                        </div>
                                    </div>
                                </div>
                            </th:block>
                        </div>
                        <div class="mb-15">
                            <div class="mb-5 fs-5 fw-normal text-gray-800">
                                <div class="mb-5 fs-5" th:utext="${detailPermasalahan.getDetail_permasalahan()} != null ?  ${detailPermasalahan.getDetail_permasalahan()} : '-'"></div>
                            </div>
                            <th:block th:if="${detailPermasalahan.getStatus() == '0'}">
                                <form id="formJawaban" class="form" action="#">
                                    <div class="mb-0">
                                        <textarea type="text" name="inputJawaban" id="inputJawaban" class="form-control" rows="4" autocomplete="off"></textarea>
                                        <button type="submit" class="btn btn-primary mt-n20 mb-20 position-relative float-end me-7">Send</button>
                                    </div>
                                </form>
                            </th:block>
                        </div>
                        <div class="mb-15">
                            <table id="tabelJawaban">
                                <tbody class="text-gray-600 fw-semibold">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalEditJawaban" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered mw-650px">
            <div class="modal-content rounded">
                <div class="modal-header">
                    <h3 class="modal-title">Edit Jawaban</h3>
                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                       <span class="svg-icon svg-icon-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                            </svg>
                        </span>
                    </div>
                </div>
                <form id="formEditJawaban" class="form" action="#">
                    <input type="text" name="idJawaban" id="idJawaban" hidden/>
                    <div class="modal-body scroll-y px-10 pt-10 pb-7">
                        <div class="d-flex flex-column">
                            <div class="card card-flush">
                                <div class="card-body ps-0 pe-0 pt-0 pb-0">
                                    <div class="mb-5 fv-row">
                                        <label class="form-label">Jawaban</label>
                                        <textarea type="text" name="editJawaban" id="editJawaban" class="form-control" rows="4" autocomplete="off"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" class="btn btn-light me-3">Reset</button>
                        <button type="submit" class="btn btn-primary"><span class="indicator-label">Simpan</span></button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalEditPertanyaan" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered mw-650px">
            <div class="modal-content rounded">
                <div class="modal-header">
                    <h3 class="modal-title">Edit Pertanyaan</h3>
                    <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                       <span class="svg-icon svg-icon-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                            </svg>
                        </span>
                    </div>
                </div>
                <form id="formEditPertanyaan" class="form" action="#">
                    <input type="text" name="idPertanyaan" id="idPertanyaan" hidden/>
                    <div class="modal-body scroll-y px-10 pt-10 pb-7">
                        <div class="d-flex flex-column">
                            <div class="card card-flush">
                                <div class="card-body ps-0 pe-0 pt-0 pb-0">
                                    <div class="mb-5 fv-row">
                                        <label class="form-label required">Pertanyaan</label>
                                        <textarea type="text" name="editPertanyaan" id="editPertanyaan" class="form-control mb-2" rows="2" autocomplete="off"></textarea>
                                    </div>
                                    <div class="mb-5 fv-row">
                                        <label class="form-label">Detail Pertanyaan</label>
                                        <textarea type="text" name="editDetailPertanyaan" id="editDetailPertanyaan" class="form-control" rows="4" autocomplete="off"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" class="btn btn-light me-3">Reset</button>
                        <button type="submit" class="btn btn-primary"><span class="indicator-label">Simpan</span></button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <input th:id="nipPegawai" th:name="nipPegawai" th:value="${nipPegawai}" hidden/>
    <input th:id="nipPertanyaan" th:name="nipPertanyaan" th:value="${detailPermasalahan.getNip_pegawai()}" hidden/>
    <input th:id="idMasalah" th:name="idMasalah" th:value="${idMasalah}" hidden/>

</div>
<div layout:fragment="custom-js" th:remove="tag">
    <script th:src="@{/assets/js/djp/custom/baseDiskusi.js}" type="text/javascript"></script>
    <script th:src="@{/assets/js/djp/custom/dashboardDiskusi.js}" type="text/javascript"></script>
</div>
</body>
</html>